
  <!--## 사이드바상자2 : 오른쪽 사이드바 영역 -->
  <div id="sidebarBox2" class="sidebarBox fold"><!-- 클래스 초기상태: 모두 접힘 -->
    <aside id="sidebar2" class="sidebar sidebarV"><s_sidebar>

      <s_sidebar_element><div class="sidebar_element datetime"><!-- 현재시각 -->
        <button class="bubbleBtn themeBtn"><span id="bubbleBtnHour"></span>:<span id="bubbleBtnMinute"></span></button>
        <div class="sidebar_elementMain">
          <div style="position: relative; padding: 20px 0;">
            <!-- 시계 그림 -->
            <div style="position: absolute; top: -10px; width: 100%">
              <!-- 바늘 -->
              <div class="niddle" style="color: var(--pointCol)">▼</div>
              <!-- 시계원 -->
              <div class="circle" 
                  style="
                    margin: 0 auto;
                    width: 60px; 
                    height: 60px; 
                    border-style: solid;
                    border-width: 5px; 
                    border-radius: 50%; 
                    border-color: #0af5 #0af5 #fd05 #fd05;
                    "></div>
            </div>
            <p style="position: relative;">
              <span class="year"></span>년
              <b><span class="month"></span></b>월
              <b><span class="date"></span></b>일
              <b><span class="day"></span>요일</b>
            </p>
            <p style="position: relative;">
              <b><span class="ampm"></span></b>
              <span class="hour strong"></span>시
              <span class="minute strong"></span>분
              <span class="second strong"></span>초
            </p>
          </div>
          <script>(function(){
            const dayList = ['일','월','화','수','목','금','토'];
            const thisSidebarItem = document.querySelector('.sidebar_element.datetime');
            if( thisSidebarItem != null ){
              updateClock();
              updateClockRotation( new Date() );
              setTimeout( updateClock, 1000 );

              //// 시계 업데이트
              function updateClock() {

                const now = new Date();// 현재 시각

                thisSidebarItem.getElementsByClassName('second')[0].innerText = now.getSeconds();
                const hour   = (now.getHours() == 12) ? 12 : (now.getHours())%12;
                const minute = now.getMinutes()
                thisSidebarItem.getElementsByClassName('year')[0].innerText = now.getFullYear();
                thisSidebarItem.getElementsByClassName('month')[0].innerText = now.getMonth()+1;
                thisSidebarItem.getElementsByClassName('date')[0].innerText = now.getDate();
                thisSidebarItem.getElementsByClassName('day')[0].innerText = dayList[now.getDay()];
                thisSidebarItem.getElementsByClassName('hour')[0].innerText = hour;
                thisSidebarItem.getElementsByClassName('ampm')[0].innerText = (now.getHours() < 12) ? '오전' : '오후';
                thisSidebarItem.getElementsByClassName('minute')[0].innerText = minute;
                document.getElementById('bubbleBtnHour').innerText   = hour   < 10 ? '0'+hour   : hour  ;
                document.getElementById('bubbleBtnMinute').innerText = minute < 10 ? '0'+minute : minute;
                updateClockRotation( now );

                let tt = Date.now();
                const nextTick = Math.floor( tt/1000 ) * 1000 + 1000;
                let timeToWaitForNextTick = nextTick - tt;
                if( timeToWaitForNextTick < 1 ){
                  timeToWaitForNextTick = 1000
                }
                setTimeout( updateClock, timeToWaitForNextTick );
              }

              //// 시계원 회전
              function updateClockRotation( now ){
                thisSidebarItem.getElementsByClassName('circle')[0]
                  .style.transform 
                  = 'rotate('+(-45-now.getHours()*15-now.getMinutes()*0.25)+'deg)'
              }
            }
          })();</script>
        </div>
        <span class="caption">현재시각</span>
      </div></s_sidebar_element>

      <s_sidebar_element><div class="sidebar_element bonmunContentsTable"><!-- 본문 목차 -->
        <button class="bubbleBtn themeBtn">&#x2630;</button>
        <div class="sidebar_elementMain">
          <!-- 게시글 보기 페이지에서만 나타난다. hn 태그들을 인식해서 목차를 만든다. -->
          <ol id="bonmunHeadingList" class="_textLeft"></ol>
        </div>
        <span class="caption">목차</span>
        <script>(function(){
          if( document.getElementById('tt-body-page') == null ){
            document.querySelector('.sidebar_element.bonmunContentsTable').remove();
          }else{// 게시글 페이지일 때만
            //// 본문 다 불러온 뒤에 목차 생성
            document.addEventListener('DOMContentLoaded', function(){
              let list = document.getElementById('bonmunHeadingList')
              const hs = document.getElementsByClassName('bonmun')[0]
                  .querySelectorAll('.pmargin > h2, .pmargin > h3, .pmargin > h4');// 대상 소제목 요소들 선택
              let level = 0;
              let h2 = 0;
              let h3 = 0;
              let h4 = 0;
              let htext;
              let hclass;
              let tempstr = '';
              for( let i=0; i<hs.length; i+=1 ){
                if( hs[i].nodeName == 'H2'  ){
                  level = 2;
                  h2 += 1;// 자기 번호 카운트
                  h3 = 0;// 하위 문단 번호 초기화
                  h4 = 0;// 하위 문단 번호 초기화
                  hn = h2;// 번호
                  hclass = 'h2';
                }
                if( hs[i].nodeName == 'H3'  ){
                  level = 3;
                  h3 += 1;// 자기 번호 카운트
                  h4 = 0;// 하위 문단 번호 초기화
                  hn = h2+'-'+h3;// 번호
                  hclass = 'h3';
                }
                if( hs[i].nodeName == 'H4'  ){
                  level = 4;
                  h4 += 1;// 자기 번호 카운트
                  hn = h2+'-'+h3+'-'+h4;// 번호
                  hclass = 'h4';
                }
                htext = hs[i].innerText;
                //// 소제목에 번호 붙이기
                if( '[##_var_headingNumbering_##]' == true ){
                  hs[i].innerHTML 
                    = '<span class="hn" id="hn-'+hn+'">'+hn+'. </span>'
                    + hs[i].innerHTML;
                  //// 목차 모듈에 항목 생성 (번호 있음)
                  tempstr += 
                    '<li class="line-out '+hclass+'">'
                    +'<a class="line-in" href="#hn-'+hn+'">'
                    +   '<span class="num">'+hn+'</span>. '+htext
                    +'</a></li>';
                }
                else{
                  //// 목차 모듈에 항목 생성 (번호 없음)
                  tempstr += 
                    '<li class="line-out '+hclass+'">'
                    +'<a class="line-in" href="#hn-'+hn+'">'
                    +   '<span class="numBlank numBlank'+level+'"></span>'+htext
                    +'</a></li>';
                }
              }
              //// 다 돌았는데도 나온 소제목이 하나도 없으면 없다고 표시
              if( tempstr == '' ){
                list.innerHTML = '<li class="_textCenter">본문에 소제목이 없습니다.</li>'
              }
              else {// 소제목 있음
                list.innerHTML = tempstr;
                window.addEventListener('scroll', function(){// 스크롤 이벤트
                  let currentH = 0;// 스크롤 위치 상; 현재 보고있는 목차 항목
                  for( let i=0; i < hs.length; i+=1 ){// 초기화
                    list.childNodes[i].classList.remove('current');
                  }
                  for( let i=hs.length-1; i >= 0 ; i-=1 ){
                    if( hs[i].getBoundingClientRect().y < (window.outerHeight)/3 ){// 소제목의 y위치가 어느정도보다 높으면
                      list.childNodes[i].classList.add('current');
                      break;
                    }
                  }
                });
              }
            });
          }
        })();</script>
      </div></s_sidebar_element>

      <s_sidebar_element><div class="sidebar_element"><!-- 설정 -->
        <button class="bubbleBtn themeBtn">&#x2699;&#xFE0F;</button>
        <div class="sidebar_elementMain settings">
          <div class="settingForm darkmode">
            <input class="settingCore" type="hidden" name="darkmode" onchange="onchangeDarkmode(this)" oninvalid="setDefaultDarkmode(this)">
            빛깔: <button id="darkmodeBtn" class="settingAction toggle">&#x2713;</button>
            <input type="checkbox" class="fixCbox" oninvalid="setDefaultDarkmode()" /><label class="fixCboxLabel">굄</label>
            <script type="text/javascript">
              function onchangeDarkmode( settingCore ){
                setDarkmode( settingCore );
                setSettingFixCbox( settingCore.name, true );
              }

              function setDarkmode( settingCore , isDark ){
                if( isDark === undefined )
                  isDark = settingCore.value === 'true' ? true : false;

                if( isDark ){
                  document.body.classList.add('theme-dark');
                  document.body.classList.remove('theme-light');
                  document.documentElement.setAttribute('data-theme', 'dark');
                } else {
                  document.body.classList.add('theme-light');
                  document.body.classList.remove('theme-dark');
                  document.documentElement.setAttribute('data-theme', 'light');
                }
              }

              //// 시간대에 따라 다크모드 설정
              function setDefaultDarkmode( settingCore ) {
                if( settingCore === undefined )
                  settingCore = document.getElementById('settingCore-darkmode');

                const hour = new Date().getHours();
                if( hour >= 18 || hour < 6 ){
                  settingCore.value = 'true';
                  setDarkmode( settingCore, true );
                }else{
                  settingCore.value = 'false';
                  setDarkmode( settingCore, false );
                }
              }
            </script>
          </div>

          <div class="fontsize settingForm">
            <input type="hidden" class="settingCore" name="fontsize" value="100" onchange="onchangeFontsize(this)" />
            글자: 
            <button class="fontsizeBtn fontsizeBtnDown  themeBtn" onclick="clickFontsizeBtn(-1)" style="font-size: 75%;">작게</button>
            <button class="fontsizeBtn fontsizeBtnReset themeBtn" onclick="clickFontsizeBtn( 0)" >보통</button>
            <button class="fontsizeBtn fontsizeBtnUp    themeBtn" onclick="clickFontsizeBtn( 1)"  style="font-size: 135%;">크게</button>
            <input type="checkbox" class="fixCbox" /><label class="fixCboxLabel">굄</label>
            <script type="text/javascript">
              function onchangeFontsize( settingCore ) {
                document.body.style.fontSize = settingCore.value + '%';
              }

              function clickFontsizeBtn( goup ){
                let value = Number(getSettingValue('fontsize'));
                if( goup === 1 ){
                  value += 5; if( value > 150 ) value = 150;
                }else if( goup === -1 ){
                  value -= 5; if( value < 75 ) value = 75;
                }else{
                  value = 100;
                }
                setSettingValue( 'fontsize', value );
              }
            </script>
          </div>
        </div>
        <span class="caption">설정</span>
      </div></s_sidebar_element>

      <s_sidebar_element><div class="sidebar_element description"><!-- 이 블로그는 -->
        <button class="bubbleBtn themeBtn">&#x2754;</button>
        <div class="sidebar_elementMain description" style="position: relative">
          <div class="box _textCenter">
            <div class="head">
              <p class="title _fontSerif _fontBold">[##_title_##]</p>
              <div class="img">
                <div class="blog_image">[##_blog_image_##]</div>
                <img class="ribbon" src="./images/ribbon.png">
              </div>
              <p class="who _fontSerif _fontSmaller">[##_blogger_##]</p>
            </div>
            <p class="desc _fontCursive">[##_desc_##]</p>
            <div class="linksBox">
              <hr>
              <span class="_fontSerif">LINKS</span>
              <p class="links _textRight">
                <s_link_rep><a href="[##_link_url_##]" target="_blank">[##_link_site_##]</a> </s_link_rep>
                <a href="[##_rss_url_##]">RSS</a>
              </p>
            </div>
          </div>
          <svg width="20px" height="40px"
              style="
                position: absolute;
                bottom: -23px;
                right: 37px;
                ">
            <polygon points="0,0 20,0 20,40 10,30 0,40" fill="var(--pointCol)" fill-opacity="0.6 "/>
          </svg>
        </div>
        <span class="caption">이 블로그는?</span>
        <script type="text/javascript">
          (function(){
            const as = document.querySelectorAll('.sidebar_element.description .links a');
            for( let a of as ){
              let logoName;
              //// url의 hostname으로 대응되는 로고 찾기
              try {
                const hostname = new URL( a.href ).hostname;
                if( a.href.endsWith('/rss') ) logoName = 'rss';
                else if( hostname ===       'youtu.be' )       logoName = 'youtube';
                else if( hostname ===       'youtube.com' )    logoName = 'youtube';
                else if( hostname.endsWith('.youtube.com') )   logoName = 'youtube';
                else if( hostname ===       'instagram.com' )  logoName = 'instagram';
                else if( hostname.endsWith('.instagram.com') ) logoName = 'instagram';
                else if( hostname ===       'x.com' )          logoName = 'x';
                else if( hostname.endsWith('.x.com') )         logoName = 'x';
                else if( hostname ===       'twitter.com' )    logoName = 'x';
                else if( hostname.endsWith('.twitter.com') )   logoName = 'x';
                else if( hostname ===       'twitch.tv' )      logoName = 'twitch';
                else if( hostname.endsWith('.twitch.tv') )     logoName = 'twitch';
                else if( hostname ===       'tistory.com' )    logoName = 'tistory';
                else if( hostname.endsWith('.tistory.com') )   logoName = 'tistory';
                else if( hostname ===       'blog.naver.com' ) logoName = 'naverblog';
                else if( hostname ===       'cafe.naver.com' ) logoName = 'navercafe';
                else if( hostname ===       'github.com' )     logoName = 'github';
                else if( hostname.endsWith('.github.com') )    logoName = 'github';
              } catch (e) {
                return false; // 유효하지 않은 URL인 경우
              }
              if( logoName != null ){
                const img = document.createElement('img');
                img.src = './images/link-' + logoName + '.png';
                a.prepend(img);
              }else{// 로고 없음: 기본이미지 이모지
                a.prepend(String.fromCodePoint(0x1F517));
              }
            }
          })();
        </script>
      </div></s_sidebar_element>
    </s_sidebar></aside>
    <div id="sidebar2Remocon"><button id="sidebar2X" class="themeBtn">&#x2715;</button></div>
    
  </div><!-- 사이드바상자2 ##-->